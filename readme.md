# 如何运行

https://github.com/seermer/HollowKnight_RL  

基于这个作者的基础而写的代码，所以如果你想跑这个程序的话，你需要去原作者的代码仓库下载“显示血条mod”，两张定位用的图片，修改游戏分辨率和窗口模式，然后，你也得把空洞骑士打到神居，解锁手办屋
此外，我的键位是移动ad；上下ws；攻击j；跳跃k；需要快速劈砍护符
运行model.py开始训练，在callback2里修改定时保存的步数间隔
在Python3.9可运行

# 我的改动

重写了env，其他部分在stablebaseline3的框架下写

# 和原作者的区别：

1. 由0.3s一步改为0.15s一步，相当于ai的动作更细致了；但是引入一个问题，即使ai带上快速劈砍，攻击也是间隔的，不读内存的情况下无法判断是否是正确的顺序，只能修正来部分解决这个问题；原因不明：可能与二段跳后0.1s不能攻击有关
2. 网络不同，详见model.py
3. ai现在可以选择跳多高
4. 用ppo而非dqn，当然，在stablebaseline3的框架下改算法还是比较方便的
5. 加入下劈
6. 加入冲刺和不攻击
7. boss加入zote

# 已知bug：

1. 注意窗口模式的空洞骑士是可以缩放的，不要不小心拉长或缩小，那样会无法检测血条；而且最好不要在游戏中启用steam界面，可能会被好友上线下线遮盖血条

# 接下来的方向：

1. 移除stay，因为减少step间隔后，左右理论上已经可以满足

2. 给模型的输入加入更多的信息，冲刺硬直，过去几帧的动作，

3. 改善跳跃、移动、冲刺之间的执行顺序，因为如果这一帧是冲刺，那么跳跃变得没有意义反而浪费跳跃次数